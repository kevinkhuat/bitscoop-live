{
  "provider": {
    "provider_number": "000000000000000000000001",
    "name": "Google",
    "domain": "https://www.googleapis.com",
    "client_callable": true,
    "backend_name": "google-oauth2",
    "endpoint_wait_time": 0,
    "auth_backend": "social.backends.google.GoogleOAuth2",
    "description": "Internet-related services and products",
    "tags": [
      "collaboration",
      "media",
      "productivity",
      "social",
      "video"
    ],
    "auth_type": 0
  },
  "event_sources": {
    "youtube_watch": {
      "description": "Videos you have watched on YouTube",
      "display_name": "YouTube videos watched",
      "enabled_by_default": true,
      "endpoints": [
        "youtube_watch_playlist",
        "youtube_channels",
        "youtube_oembed"
      ],
      "initial_mapping": "youtube_watch_playlist",
      "mappings": {
        "youtube_watch_playlist": {
          "returned_data_location": "items",
          "type": "play",
          "conditions": {
          },
          "db_entry_mapping": {
            "data": {
              "main": {
                "unique_identifiers": [
                  {
                    "hydration_method": "translate",
                    "value": "permission.event_source.name"
                  },
                  {
                    "hydration_method": "literal",
                    "value": "youtube"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  }
                ]
              }
            },
            "event": {
              "unique_identifiers": [
                {
                  "hydration_method": "literal",
                  "value": "youtube"
                },
                {
                  "hydration_method": "translate",
                  "value": "responseObject.id"
                }
              ],
              "mapped_fields": {
                "datetime": {
                  "hydration_method": "translate",
                  "type": "string",
                  "value": "responseObject.snippet.publishedAt"
                },
                "provider_name": {
                  "hydration_method": "literal",
                  "type": "string",
                  "value": "google"
                }
              }
            },
            "content": {
              "youtube_watch": {
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "youtube"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  }
                ],
                "mapped_fields": {
                  "embed_content": {
                    "hydration_method": "endpoint",
                    "value": {
                      "endpoint": "youtube_oembed",
                      "parameter_sources": {
                        "video_url": {
                          "hydration_method": "reformat",
                          "hydration_location": "responseObject.snippet.resourceId.videoId",
                          "value": "https://www.youtube.com/watch?v=[$1]"
                        }
                      },
                      "value_location": [
                        [
                          "html"
                        ]
                      ]
                    }
                  },
                  "embed_format": {
                    "hydration_method": "literal",
                    "value": "iframe"
                  },
                  "thumbnail": {
                    "hydration_method": "translate",
                    "value": [
                      "responseObject.snippet.thumbnails.medium.url",
                      "responseObject.snippet.thumbnails.default.url"
                    ]
                  },
                  "title": {
                    "hydration_method": "translate",
                    "value": "responseObject.snippet.title"
                  },
                  "type": {
                    "hydration_method": "literal",
                    "type": "string",
                    "value": "video"
                  },
                  "url": {
                    "hydration_method": "reformat",
                    "hydration_location": "responseObject.snippet.resourceId.videoId",
                    "value": "https://www.youtube.com/watch?v=[$1]"
                  }
                }
              }
            }
          }
        },
        "pagination": {
          "method": "pageToken",
          "page_token_location": "nextPageToken"
        }
      }
    },
    "youtube_uploads": {
      "description": "Videos you have uploaded to YouTube ",
      "display_name": "YouTube videos created",
      "enabled_by_default": true,
      "endpoints": [
        "youtube_uploads_playlist",
        "youtube_channels",
        "youtube_oembed"
      ],
      "initial_mapping": "youtube_uploads_playlist",
      "mappings": {
        "youtube_uploads_playlist": {
          "returned_data_location": "items",
          "type": "create",
          "conditions": {
          },
          "db_entry_mapping": {
            "data": {
              "main": {
                "unique_identifiers": [
                  {
                    "hydration_method": "translate",
                    "value": "permission.event_source.name"
                  },
                  {
                    "hydration_method": "literal",
                    "value": "youtube"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  }
                ]
              }
            },
            "event": {
              "unique_identifiers": [
                {
                  "hydration_method": "literal",
                  "value": "youtube"
                },
                {
                  "hydration_method": "translate",
                  "value": "responseObject.id"
                }
              ],
              "mapped_fields": {
                "datetime": {
                  "hydration_method": "translate",
                  "type": "string",
                  "value": "responseObject.snippet.publishedAt"
                },
                "provider_name": {
                  "hydration_method": "literal",
                  "type": "string",
                  "value": "google"
                }
              }
            },
            "content": {
              "youtube_uploads": {
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "youtube"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  }
                ],
                "mapped_fields": {
                  "embed_content": {
                    "hydration_method": "endpoint",
                    "value": {
                      "endpoint": "youtube_oembed",
                      "parameter_sources": {
                        "video_url": {
                          "hydration_method": "reformat",
                          "hydration_location": "responseObject.snippet.resourceId.videoId",
                          "value": "https://www.youtube.com/watch?v=[$1]"
                        }
                      },
                      "value_location": [
                        [
                          "html"
                        ]
                      ]
                    }
                  },
                  "embed_format": {
                    "hydration_method": "literal",
                    "value": "iframe"
                  },
                  "thumbnail": {
                    "hydration_method": "translate",
                    "value": [
                      "responseObject.snippet.thumbnails.medium.url",
                      "responseObject.snippet.thumbnails.default.url"
                    ]
                  },
                  "title": {
                    "hydration_method": "translate",
                    "value": "responseObject.snippet.title"
                  },
                  "type": {
                    "hydration_method": "literal",
                    "type": "string",
                    "value": "video"
                  },
                  "url": {
                    "hydration_method": "reformat",
                    "hydration_location": "responseObject.snippet.resourceId.videoId",
                    "value": "https://www.youtube.com/watch?v=[$1]"
                  }
                }
              }
            }
          }
        },
        "pagination": {
          "method": "pageToken",
          "page_token_location": "nextPageToken"
        }
      }
    },
    "gmail_inbox": {
      "display_name": "Gmail",
      "description": "Email you have sent and received",
      "path": "gmail/v1/users/me/messages",
      "enabled_by_default": true,
      "endpoints": [
        "gmail_inbox",
        "gmail_message"
      ],
      "initial_mapping": "gmail_inbox",
      "parameter_descriptions": {
        "access_token": {
          "field_location": "access_token",
          "transform": {
            "value": null,
            "type": "translate"
          },
          "description": "OAuth2 secret key",
          "format": "String"
        }
      },
      "mappings": {
        "gmail_inbox": {
          "returned_data_location": "messages",
          "type": "message",
          "conditions": {
          },
          "db_entry_mapping": {
            "data": {
              "main": {
                "unique_identifiers": [
                  {
                    "hydration_method": "translate",
                    "value": "permission.event_source.name"
                  },
                  {
                    "hydration_method": "literal",
                    "value": "gmail"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  }
                ]
              }
            },
            "event": {
              "unique_identifiers": [
                {
                  "hydration_method": "literal",
                  "value": "gmail"
                },
                {
                  "hydration_method": "translate",
                  "value": "responseObject.id"
                }
              ],
              "mapped_fields": {
                "contact_interaction_type": {
                  "hydration_method": "literal",
                  "type": "string",
                  "value": "with"
                },
                "datetime": {
                  "hydration_method": "endpoint",
                  "value": {
                    "endpoint": "gmail_message",
                    "parameter_sources": {
                      "id": {
                        "hydration_method": "translate",
                        "value": "responseObject.id"
                      }
                    },
                    "value_location": [
                      [
                        "payload.headers",
                        {
                          "type": "list",
                          "hydration_method": "find",
                          "selector_location": "name",
                          "selector_type": "literal",
                          "selector": "Date"
                        },
                        "value"
                      ]
                    ]
                  }
                },
                "provider_name": {
                  "hydration_method": "literal",
                  "type": "string",
                  "value": "google"
                }
              }
            },
            "content": {
              "email": {
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "gmail"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  }
                ],
                "mapped_fields": {
                  "type": {
                    "hydration_method": "literal",
                    "type": "string",
                    "value": "text"
                  },
                  "text": {
                    "hydration_method": "endpoint",
                    "encoded": true,
                    "value": {
                      "endpoint": "gmail_message",
                      "parameter_sources": {
                        "id": {
                          "hydration_method": "translate",
                          "value": "responseObject.id"
                        }
                      },
                      "value_location": [
                        [
                          "payload.parts",
                          {
                            "type": "list",
                            "hydration_method": "find",
                            "selector_location": "partId",
                            "selector_type": "literal",
                            "selector": 0
                          },
                          "body.data"
                        ],
                        [
                          "payload.parts[0].parts",
                          {
                            "type": "list",
                            "hydration_method": "find",
                            "selector_location": "partId",
                            "selector_type": "literal",
                            "selector": 0.0
                          },
                          "body.data"
                        ],
                        [
                          "payload.body.data"
                        ]
                      ]
                    }
                  }
                }
              }
            },
            "contacts": {
              "message_from": {
                "call_endpoint": {
                  "hydration_method": "endpoint",
                  "value": {
                    "endpoint": "gmail_message",
                    "parameter_sources": {
                      "id": {
                        "hydration_method": "translate",
                        "value": "responseObject.id"
                      }
                    },
                    "value_location": [
                      [
                        "payload.headers",
                        {
                          "type": "list",
                          "hydration_method": "find",
                          "selector_location": "name",
                          "selector_type": "literal",
                          "selector": "From"
                        }
                      ]
                    ]
                  }
                },
                "hydrate_list_location": "childObject",
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "gmail"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "value"
                  }
                ],
                "mapped_fields": {
                  "name": {
                    "hydration_method": "translate",
                    "value": "value"
                  }
                }
              },
              "message_to": {
                "call_endpoint": {
                  "hydration_method": "endpoint",
                  "value": {
                    "endpoint": "gmail_message",
                    "parameter_sources": {
                      "id": {
                        "hydration_method": "translate",
                        "value": "responseObject.id"
                      }
                    },
                    "value_location": [
                      [
                        "payload.headers",
                        {
                          "type": "list",
                          "hydration_method": "find",
                          "selector_location": "name",
                          "selector_type": "literal",
                          "selector": "To"
                        }
                      ]
                    ]
                  }
                },
                "hydrate_list_location": "childObject",
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "gmail"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "value"
                  }
                ],
                "mapped_fields": {
                  "name": {
                    "hydration_method": "translate",
                    "value": "value"
                  }
                }
              }
            }
          }
        },
        "pagination": {
          "method": "pageToken",
          "page_token_location": "nextPageToken"
        }
      }
    },
    "drive_changes": {
      "description": "Google Drive",
      "display_name": "Files you have created, edited, and viewed on Google Drive",
      "enabled_by_default": true,
      "endpoints": [
        "drive_changes"
      ],
      "initial_mapping": "drive_changes",
      "mappings": {
        "drive_changes": {
          "returned_data_location": "items",
          "type": "edit",
          "db_entry_mapping": {
            "data": {
              "main": {
                "unique_identifiers": [
                  {
                    "hydration_method": "translate",
                    "value": "permission.event_source.name"
                  },
                  {
                    "hydration_method": "literal",
                    "value": "google_drive"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.id"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.modificationDate"
                  }
                ]
              }
            },
            "event": {
              "unique_identifiers": [
                {
                  "hydration_method": "literal",
                  "value": "google_drive"
                },
                {
                  "hydration_method": "translate",
                  "value": "responseObject.id"
                },
                {
                  "hydration_method": "translate",
                  "value": "responseObject.modificationDate"
                }
              ],
              "mapped_fields": {
                "contact_interaction_type": {
                  "hydration_method": "literal",
                  "type": "string",
                  "value": "with"
                },
                "datetime": {
                  "hydration_method": "translate",
                  "type": "string",
                  "value": [
                    "responseObject.file.modifiedByMeDate",
                    "responseObject.file.lastViewedByMeDate",
                    "responseObject.file.modifiedDate"
                  ]
                },
                "provider_name": {
                  "hydration_method": "literal",
                  "type": "string",
                  "value": "google"
                }
              }
            },
            "content": {
              "file": {
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "google_drive"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "responseObject.file.title"
                  }
                ],
                "mapped_fields": {
                  "file_extension": {
                    "hydration_method": "translate",
                    "value": "responseObject.file.mimeType"
                  },
                  "thumbnail": {
                    "hydration_method": "translate",
                    "value": [
                      "responseObject.file.thumbnailLink",
                      "responseObject.file.iconLink"
                    ]
                  },
                  "title": {
                    "hydration_method": "translate",
                    "value": "responseObject.file.title"
                  },
                  "type": {
                    "hydration_method": "literal",
                    "type": "string",
                    "value": "file"
                  },
                  "url": {
                    "hydration_method": "translate",
                    "value": "responseObject.file.defaultOpenWithLink"
                  }
                }
              }
            },
            "contacts": {
              "last_modifying_user": {
                "hydrate_list_location": "responseObject.file.lastModifyingUser",
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "google_drive"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "displayName"
                  }
                ],
                "mapped_fields": {
                  "name": {
                    "hydration_method": "translate",
                    "value": "displayName"
                  },
                  "handle": {
                    "hydration_method": "translate",
                    "value": "emailAddress"
                  }
                }
              },
              "owners": {
                "hydrate_list_location": "responseObject.file.owners",
                "unique_identifiers": [
                  {
                    "hydration_method": "literal",
                    "value": "google_drive"
                  },
                  {
                    "hydration_method": "translate",
                    "value": "displayName"
                  }
                ],
                "mapped_fields": {
                  "name": {
                    "hydration_method": "translate",
                    "value": "displayName"
                  },
                  "handle": {
                    "hydration_method": "translate",
                    "value": "emailAddress"
                  }
                }
              }
            }
          }
        },
        "pagination": {
          "method": "pageToken",
          "page_token_location": "nextPageToken"
        }
      }
    }
  },
  "endpoints": {
    "youtube_channels": {
      "call_method": "GET",
      "path": "youtube/v3/channels",
      "parameter_descriptions": {
        "part": {
          "description": "Channel resources",
          "hydration_method": "literal",
          "value": "contentDetails"
        },
        "mine": {
          "description": "Only get data for the authenticated user",
          "hydration_method": "literal",
          "value": true
        },
        "access_token": {
          "description": "OAuth2 access key",
          "hydration_method": "server",
          "value": "access_token"
        }
      }
    },
    "youtube_watch_playlist": {
      "call_method": "GET",
      "path": "youtube/v3/playlistItems",
      "parameter_descriptions": {
        "part": {
          "description": "Channel resources",
          "hydration_method": "literal",
          "value": "snippet"
        },
        "playlistId": {
          "description": "ID of the user's Watch History playlist",
          "hydration_method": "endpoint",
          "value": {
            "endpoint": "youtube_channels",
            "parameter_sources": {
              "access_token": {
                "hydration_method": "server",
                "value": "access_token"
              }
            },
            "value_location": [
              [
                "items[0].contentDetails.relatedPlaylists.watchHistory"
              ]
            ]
          }
        },
        "access_token": {
          "description": "OAuth2 access key",
          "hydration_method": "server",
          "value": "access_token"
        },
        "maxResults": {
          "description": "Maximum number of results to be returned at once",
          "hydration_method": "literal",
          "value": 50
        },
        "fields": {
          "description": "Restrict which fields are returned by the endpoint",
          "hydration_method": "literal",
          "value": "items(id,snippet),nextPageToken"
        },
        "pageToken": {
          "description": "Token for the next page in the results",
          "hydration_method": "translate",
          "value": "connection.endpoint_data.youtube_watch.youtube_watch_playlist.pageToken"
        }
      }
    },
    "youtube_uploads_playlist": {
      "call_method": "GET",
      "path": "youtube/v3/playlistItems",
      "parameter_descriptions": {
        "part": {
          "description": "Channel resources",
          "hydration_method": "literal",
          "value": "snippet"
        },
        "playlistId": {
          "description": "ID of the user's Uploads playlist",
          "hydration_method": "endpoint",
          "value": {
            "endpoint": "youtube_channels",
            "parameter_sources": {
              "access_token": {
                "hydration_method": "server",
                "value": "access_token"
              }
            },
            "value_location": [
              [
                "items[0].contentDetails.relatedPlaylists.uploads"
              ]
            ]
          }
        },
        "access_token": {
          "description": "OAuth2 access key",
          "hydration_method": "server",
          "value": "access_token"
        },
        "maxResults": {
          "description": "Maximum number of results to be returned at once",
          "hydration_method": "literal",
          "value": 50
        },
        "fields": {
          "description": "Restrict which fields are returned by the endpoint",
          "hydration_method": "literal",
          "value": "items(id,snippet),nextPageToken"
        },
        "pageToken": {
          "description": "Token for the next page in the results",
          "hydration_method": "translate",
          "value": "connection.endpoint_data.youtube_uploads.youtube_uploads_playlist.pageToken"
        }
      }
    },
    "gmail_inbox": {
      "call_method": "GET",
      "path": "gmail/v1/users/me/messages",
      "parameter_descriptions": {
        "pageToken": {
          "description": "Token for the next page in the results",
          "hydration_method": "translate",
          "value": "connection.endpoint_data.gmail_inbox.gmail_inbox.pageToken"
        },
        "access_token": {
          "description": "OAuth2 access key",
          "hydration_method": "server",
          "value": "access_token"
        },
        "q": {
          "description": "QueryString",
          "hydration_method": "reformat",
          "hydration_location": "connection.endpoint_data.gmail_inbox.gmail_inbox.q",
          "save_to_connection": {
            "location": "date_now"
          },
          "value": "after:[$1]",
          "default": "date_now"
        }
      }
    },
    "gmail_message": {
      "call_method": "GET",
      "path": "gmail/v1/users/me/messages/[$1]",
      "additional_path_fields": [
        {
          "description": "ID of the message",
          "parameter": "id",
          "replace": "[$1]"
        }
      ],
      "parameter_descriptions": {
        "id": {
          "description": "ID of the message",
          "hydration_method": "translate",
          "value": "responseObject.id"
        },
        "pageToken": {
          "description": "Token for the next page in the results",
          "hydration_method": "translate",
          "value": "connection.endpoint_data.gmail_inbox.gmail_inbox.pageToken"
        },
        "access_token": {
          "description": "OAuth2 access key",
          "hydration_method": "server",
          "value": "access_token"
        }
      }
    },
    "drive_changes": {
      "call_method": "GET",
      "path": "drive/v2/changes",
      "parameter_descriptions": {
        "includeDeleted": {
          "description": "Whether to include file deletions",
          "hydration_method": "literal",
          "value": false
        },
        "maxResults": {
          "description": "Maximum number of results to return at one time",
          "hydration_method": "literal",
          "value": 1000
        },
        "pageToken": {
          "description": "Token for the next page in the results",
          "hydration_method": "translate",
          "value": "connection.endpoint_data.drive_changes.drive_changes.pageToken"
        },
        "access_token": {
          "description": "OAuth2 access key",
          "hydration_method": "server",
          "value": "access_token"
        },
        "startChangeId": {
          "description": "ID of the latest change found in the previous search",
          "hydration_method": "translate",
          "save_to_connection": {
            "location": "largestChangeId"
          },
          "value": "connection.endpoint_data.drive_changes.drive_changes.startChangeId"
        }
      }
    },
    "youtube_oembed": {
      "call_method": "GET",
      "url": "https://www.youtube.com/oembed?url=[__url__]&format=json",
      "additional_path_fields": [
        {
          "description": "URL of YouTube video",
          "parameter": "video_url",
          "replace": "[__url__]"
        }
      ],
      "parameter_descriptions": {
        "video_url": {
          "description": "URL of YouTube video",
          "hydration_method": "reformat",
          "hydration_location": "responseObject.snippet.resourceId.videoId",
          "value": "https://www.youtube.com/watch?v=[$1]"
        }
      }
    }
  }
}
