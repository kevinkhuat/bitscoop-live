/*!{id:msgpack.js,ver:1.05,license:"MIT",author:"uupaa.js@gmail.com"}*/
this.msgpack||function(p){function q(f,a){v=0;var c=l([],f,0);return v?!1:a?z(c):c}function x(f){A="string"===typeof f?B(f):f;c=-1;return n()}function l(f,a,c){var b,e,h;if(null==a)f.push(192);else if(!1===a)f.push(194);else if(!0===a)f.push(195);else switch(typeof a){case "number":a!==a?f.push(203,255,255,255,255,255,255,255,255):Infinity===a?f.push(203,127,240,0,0,0,0,0,0):Math.floor(a)===a?0>a?-32<=a?f.push(224+a+32):-128<a?f.push(208,a+256):-32768<a?(a+=65536,f.push(209,a>>8,a&255)):-2147483648<
a?(a+=4294967296,f.push(210,a>>>24,a>>16&255,a>>8&255,a&255)):(e=Math.floor(a/4294967296),a&=4294967295,f.push(211,e>>24&255,e>>16&255,e>>8&255,e&255,a>>24&255,a>>16&255,a>>8&255,a&255)):128>a?f.push(a):256>a?f.push(204,a):65536>a?f.push(205,a>>8,a&255):4294967296>a?f.push(206,a>>>24,a>>16&255,a>>8&255,a&255):(e=Math.floor(a/4294967296),a&=4294967295,f.push(207,e>>24&255,e>>16&255,e>>8&255,e&255,a>>24&255,a>>16&255,a>>8&255,a&255)):((e=0>a)&&(a*=-1),h=Math.log(a)/0.6931471805599453+1023|0,c=a*Math.pow(2,
1075-h),a=c&4294967295,e&&(h|=2048),e=c/4294967296&1048575|h<<20,f.push(203,e>>24&255,e>>16&255,e>>8&255,e&255,a>>24&255,a>>16&255,a>>8&255,a&255));break;case "string":c=a.length;h=f.length;f.push(0);for(e=0;e<c;++e)b=a.charCodeAt(e),128>b?f.push(b&127):2048>b?f.push(b>>>6&31|192,b&63|128):65536>b&&f.push(b>>>12&15|224,b>>>6&63|128,b&63|128);b=f.length-h-1;32>b?f[h]=160+b:65536>b?f.splice(h,1,218,b>>8,b&255):4294967296>b&&f.splice(h,1,219,b>>>24,b>>16&255,b>>8&255,b&255);break;default:if(++c>=E)return v=
1,[];if(F(a)){b=a.length;16>b?f.push(144+b):65536>b?f.push(220,b>>8,b&255):4294967296>b&&f.push(221,b>>>24,b>>16&255,b>>8&255,b&255);for(e=0;e<b;++e)l(f,a[e],c)}else{h=f.length;f.push(0);b=0;for(e in a)++b,l(f,e,c),l(f,a[e],c);16>b?f[h]=128+b:65536>b?f.splice(h,1,222,b>>8,b&255):4294967296>b&&f.splice(h,1,223,b>>>24,b>>16&255,b>>8&255,b&255)}}return f}function n(){var f,a,g,b=0,e,h,d=A;a=d[++c];if(224<=a)return a-256;if(192>a){if(128>a)return a;144>a?(b=a-128,a=128):160>a?(b=a-144,a=144):(b=a-160,
a=160)}switch(a){case 192:return null;case 194:return!1;case 195:return!0;case 202:return b=16777216*d[++c]+(d[++c]<<16)+(d[++c]<<8)+d[++c],e=b>>23&255,h=b&8388607,!b||2147483648===b?0:255===e?h?NaN:Infinity:(b&2147483648?-1:1)*(h|8388608)*Math.pow(2,e-127-23);case 203:b=16777216*d[++c]+(d[++c]<<16)+(d[++c]<<8)+d[++c];a=b&2147483648;e=b>>20&2047;h=b&1048575;if(!b||2147483648===b)return c+=4,0;if(2047===e)return c+=4,h?NaN:Infinity;b=16777216*d[++c]+(d[++c]<<16)+(d[++c]<<8)+d[++c];return(a?-1:1)*((h|
1048576)*Math.pow(2,e-1023-20)+b*Math.pow(2,e-1023-52));case 207:return b=16777216*d[++c]+(d[++c]<<16)+(d[++c]<<8)+d[++c],4294967296*b+16777216*d[++c]+(d[++c]<<16)+(d[++c]<<8)+d[++c];case 206:b+=16777216*d[++c]+(d[++c]<<16);case 205:b+=d[++c]<<8;case 204:return b+d[++c];case 211:return b=d[++c],b&128?-1*(72057594037927936*(b^255)+281474976710656*(d[++c]^255)+1099511627776*(d[++c]^255)+4294967296*(d[++c]^255)+16777216*(d[++c]^255)+65536*(d[++c]^255)+256*(d[++c]^255)+(d[++c]^255)+1):72057594037927936*
b+281474976710656*d[++c]+1099511627776*d[++c]+4294967296*d[++c]+16777216*d[++c]+65536*d[++c]+256*d[++c]+d[++c];case 210:return b=16777216*d[++c]+(d[++c]<<16)+(d[++c]<<8)+d[++c],2147483648>b?b:b-4294967296;case 209:return b=(d[++c]<<8)+d[++c],32768>b?b:b-65536;case 208:return b=d[++c],128>b?b:b-256;case 219:b+=16777216*d[++c]+(d[++c]<<16);case 218:b+=(d[++c]<<8)+d[++c];case 160:e=[];a=c;for(f=a+b;a<f;)g=d[++a],e.push(128>g?g:224>g?(g&31)<<6|d[++a]&63:(g&15)<<12|(d[++a]&63)<<6|d[++a]&63);c=a;return 10240>
e.length?k.apply(null,e):z(e);case 223:b+=16777216*d[++c]+(d[++c]<<16);case 222:b+=(d[++c]<<8)+d[++c];case 128:for(h={};b--;){f=d[++c]-160;e=[];a=c;for(f=a+f;a<f;)g=d[++a],e.push(128>g?g:224>g?(g&31)<<6|d[++a]&63:(g&15)<<12|(d[++a]&63)<<6|d[++a]&63);c=a;h[k.apply(null,e)]=n()}return h;case 221:b+=16777216*d[++c]+(d[++c]<<16);case 220:b+=(d[++c]<<8)+d[++c];case 144:for(e=[];b--;)e.push(n());return e}}function z(c){try{return k.apply(this,c)}catch(a){}for(var g=[],b=0,e=c.length,h=r;b<e;++b)g[b]=h[c[b]];
return g.join("")}function s(c,a,g){function b(){if(4===j.readyState){var b,c=j.status,d={status:c,ok:200<=c&&300>c};if(!v++){if("PUT"===m)b=d.ok?j.responseText:"";else if(d.ok){if(a.worker&&p.Worker){b=new Worker(msgpack.worker);b.onmessage=function(b){g(b.data,a,d)};b.postMessage({method:"unpack",data:j.responseText});h();return}if(C){var f=j;b=[];var e,k,l,n,q,r,s,t,u,c=-1,y;y=vblen(f);f=vbstr(f);k=Math.ceil(y/2);for(e=k%8;e--;)l=f.charCodeAt(++c),b.push(l&255,l>>8);for(e=k>>3;e--;)l=f.charCodeAt(++c),
k=f.charCodeAt(++c),n=f.charCodeAt(++c),q=f.charCodeAt(++c),r=f.charCodeAt(++c),s=f.charCodeAt(++c),t=f.charCodeAt(++c),u=f.charCodeAt(++c),b.push(l&255,l>>8,k&255,k>>8,n&255,n>>8,q&255,q>>8,r&255,r>>8,s&255,s>>8,t&255,t>>8,u&255,u>>8);y%2&&b.pop()}else b=B(j.responseText);b=x(b)}w&&w(j,a,d);g(b,a,d);h()}}}function e(b,c){if(!v++){var f={status:c||400,ok:!1};w&&w(j,a,f);g(null,a,f);h(b)}}function h(a){a&&j&&j.abort&&j.abort();d&&(clearTimeout(d),d=0);j=null;p.addEventListener&&p.removeEventListener("beforeunload",
e,!1)}var d=0,m=a.method||"GET",k=a.header||{},l=a.before,w=a.after,q=a.data||null,j=p.XMLHttpRequest?new XMLHttpRequest:p.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null,v=0,n,r="GET"===m&&a.binary;try{j.onreadystatechange=b;j.open(m,c,!0);l&&l(j,a);r&&j.overrideMimeType&&j.overrideMimeType("text/plain; charset=x-user-defined");q&&j.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(n in k)j.setRequestHeader(n,k[n]);p.addEventListener&&p.addEventListener("beforeunload",
e,!1);j.send(q);d=setTimeout(function(){e(1,408)},1E3*(a.timeout||10))}catch(s){e(0,400)}}function B(c){var a=[],g=t,b=c.split(""),e=-1,h;h=b.length;for(c=h%8;c--;)++e,a[e]=g[b[e]];for(c=h>>3;c--;)a.push(g[b[++e]],g[b[++e]],g[b[++e]],g[b[++e]],g[b[++e]],g[b[++e]],g[b[++e]],g[b[++e]]);return a}function D(c){var a=[],g=0,b=-1,e=c.length,h=[0,2,1][c.length%3],g=r,d=G;if(p.btoa){for(;b<e;)a.push(g[c[++b]]);return btoa(a.join(""))}for(--e;b<e;)g=c[++b]<<16|c[++b]<<8|c[++b],a.push(d[g>>18&63],d[g>>12&63],
d[g>>6&63],d[g&63]);1<h&&(a[a.length-2]="=");0<h&&(a[a.length-1]="=");return a.join("")}p.msgpack={pack:q,unpack:x,worker:"msgpack.js",upload:function(c,a,g){a.method="PUT";a.binary=!0;if(a.worker&&p.Worker){var b=new Worker(msgpack.worker);b.onmessage=function(b){a.data=b.data;s(c,a,g)};b.postMessage({method:"pack",data:a.data})}else a.data=D(q(a.data)),s(c,a,g)},download:function(c,a,g){a.method="GET";a.binary=!0;s(c,a,g)}};var C=/MSIE/.test(navigator.userAgent),t={},r={},G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),
A=[],c=0,v=0,F=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)},k=String.fromCharCode,E=512;self.importScripts&&(onmessage=function(c){"pack"===c.data.method?postMessage(D(q(c.data.data))):postMessage(x(c.data.data))});for(var m=0,u;256>m;++m)u=k(m),t[u]=m,r[m]=u;for(m=128;256>m;++m)t[k(63232+m)]=m;C&&document.write('<script type="text/vbscript">Function vblen(b)vblen=LenB(b.responseBody)End Function\nFunction vbstr(b)vbstr=CStr(b.responseBody)+chr(0)End Function\x3c/script>')}(this);